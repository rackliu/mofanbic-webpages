# 主題動畫效果文檔

## 概述

本文檔詳細說明莫凡比精品服飾網站的主題動畫系統，包括中秋、聖誕和農曆新年三個主題的動畫效果。

---

## 🏮 中秋主題動畫

### 色系配置
- **主色**：深金色 (#C9A961)
- **副色**：深藍色 (#1a3a52)
- **強調色**：銀灰色 (#b8c5d6)
- **琥珀色**：#D4A574

### 動畫效果

#### 1. 玉兔跳躍動畫 (`rabbitHop`)
- **持續時間**：4 秒
- **循環**：無限循環
- **效果**：CSS 繪製的玉兔角色在頁面左下方跳躍移動
- **觸發**：主題切換時自動啟動
- **實現**：CSS 繪製 + CSS keyframes（避免 emoji 跨平台差異）
- **特點**：
  - 使用純 CSS 繪製，確保跨平台一致性
  - 強調長耳朵特徵（35px 高），避免誤認為老鼠
  - 雙色耳朵設計（白色外框 + 粉色內側）
  - 包含完整五官和身體細節
  - 響應式縮放（桌面 1.0x，平板 0.85x，手機 0.7x）

#### 2. 雲層漂浮動畫 (`cloudDrift`)
- **持續時間**：5-7 秒
- **循環**：無限循環
- **效果**：3 朵 CSS 繪製的白雲在頁面右側緩慢漂浮
- **觸發**：主題切換時自動啟動
- **實現**：CSS 繪製 + CSS keyframes（避免 emoji 跨平台差異）
- **特點**：
  - 使用純 CSS 繪製，確保所有平台顯示一致
  - 主雲體（80px × 40px）+ 3 個圓形裝飾
  - 半透明效果（opacity: 0.6）
  - 柔和陰影增加立體感
  - 固定位置（右側 10%, 25%, 40%）

#### 3. 月亮微光閃爍 (`moonGlow`)
- **持續時間**：3 秒
- **循環**：無限循環（往返）
- **效果**：月亮在右上角微光閃爍
- **觸發**：主題切換時自動啟動
- **實現**：CSS keyframes 縮放和透明度變化

#### 4. 燈籠漂浮動畫 (`lanternFloat`)
- **持續時間**：4 秒
- **循環**：無限循環
- **效果**：6 個紅燈籠在頁面各處漂浮
- **觸發**：主題切換時自動啟動
- **實現**：CSS keyframes + 隨機位置

---

## 🎄 聖誕主題動畫

### 色系配置
- **主色**：松綠色 (#1B5E20)
- **副色**：酒紅色 (#8B0000)
- **強調色**：金色 (#FFD700)
- **銀色**：#C0C0C0

### 動畫效果

#### 1. 雪花飄落動畫 (`snowfall`)
- **持續時間**：5-8 秒（隨機）
- **循環**：無限循環
- **效果**：20 片雪花從上方飄落到下方
- **觸發**：主題切換時自動啟動
- **實現**：CSS keyframes + 隨機水平位移

#### 2. 聖誕燈串微閃動畫 (`twinkle`)
- **持續時間**：2-3 秒（隨機）
- **循環**：無限循環
- **效果**：8 個燈泡在頁面頂部微閃
- **觸發**：主題切換時自動啟動
- **實現**：CSS keyframes + 透明度和縮放變化

#### 3. 聖誕球反光動畫 (`shine`)
- **持續時間**：3-4 秒（隨機）
- **循環**：無限循環
- **效果**：6 個聖誕球在頁面右側旋轉反光
- **觸發**：主題切換時自動啟動
- **實現**：CSS keyframes 旋轉和透明度變化

---

## 🧧 農曆新年主題動畫

### 色系配置
- **主色**：中國紅 (#C53030)
- **副色**：金色 (#B7791F)
- **強調色**：淺紅 (#FEB2B2)
- **金色**：#FFD700

### 動畫效果

#### 1. 煙火爆炸動畫 (`fireworkExplode`)
- **持續時間**：1.5 秒
- **循環**：每 3 秒觸發一次（30% 機率）
- **效果**：隨機位置的煙火爆炸效果（🎆 emoji）
- **觸發**：主題切換時自動啟動，並立即顯示測試煙火
- **實現**：JavaScript 定時器 + CSS keyframes
- **改進**：
  - 使用 🎆 emoji（32px）
  - 旋轉和縮放效果（0° → 360°）
  - 附加到正確容器，z-index 優化
  - 自動清理機制防止記憶體洩漏

#### 2. 金幣灑落動畫 (`coinFall`) 💰
- **持續時間**：3-5 秒（隨機）
- **循環**：每 0.8 秒產生新金幣，無限循環
- **效果**：金幣從頂部灑落，旋轉 720 度
- **觸發**：主題切換時自動啟動
- **實現**：JavaScript 定時器 + CSS keyframes
- **特點**：
  - 隨機位置（5%-95%）
  - 隨機大小（20-30px）
  - 金色陰影效果
  - 象徵「恭喜發財」

#### 3. 燈籠搖晃動畫 (`lanternSwing`) 🏮
- **持續時間**：3-3.9 秒
- **循環**：無限循環
- **效果**：6 個扁圓形紅燈籠在畫面邊緣搖晃
- **觸發**：主題切換時自動啟動
- **實現**：CSS 繪製 + CSS keyframes
- **特點**：
  - 扁圓形造型（55px × 40px），符合傳統樣式
  - 6 個燈籠顯示不同吉祥字：福、發、財、春、喜、吉
  - 漸層紅色背景
  - 完整裝飾（吊繩、吊環、流蘇）
  - 固定位置分布（左上、右上、左中、右中、左下、右下）
  - 85% 不透明度，清晰可見
  - 左右搖擺動畫（-5° 到 +5°）

#### ~~4. 紅包門簾開場動畫~~ ❌ 已移除
- **原因**：過於突兀，遮擋主要內容

#### ~~5. 春聯捲軸展開動畫~~ ❌ 已移除
- **原因**：排版困難，顯示效果欠佳

---

## 🎯 動畫觸發機制

### 自動觸發
- 主題切換時自動啟動對應主題的所有動畫
- 根據月份自動選擇主題（9-10月：中秋、12月：聖誕、1-2月：新年）

### 手動觸發
```javascript
// 切換主題
themeConfig.setTheme('mid-autumn');

// 自動觸發中秋主題的所有動畫
```

### 動畫清理
- 切換主題時自動清理前一個主題的動畫
- 防止動畫堆積和性能問題

---

## ⚙️ 性能優化

### 實現方式
- ✅ 使用 CSS keyframes（GPU 加速）
- ✅ 使用純 CSS 繪製裝飾元素（避免 emoji 跨平台差異）
- ✅ 使用 CSS 變數動態切換
- ✅ 動畫時間 2-5 秒循環
- ✅ 計時器自動清理機制（防止記憶體洩漏）
- ✅ 使用 `will-change` 優化性能

### 跨平台相容性
- ✅ Chrome/Edge（Windows/Mac/Linux）：完全支援
- ✅ Firefox（Windows/Mac/Linux）：完全支援
- ✅ Safari（Mac/iOS）：完全支援
- ✅ Android 瀏覽器：完全支援
- ✅ iOS Safari：完全支援
- ✅ 無障礙模式：自動禁用動畫
- ✅ **跨平台一致性**：使用 CSS 繪製避免 emoji 差異

---

## 📊 動畫清單

| 主題 | 動畫名稱 | 持續時間 | 循環 | 實現方式 | 狀態 |
|------|--------|--------|------|---------|------|
| 中秋 | 玉兔跳躍 | 4s | ∞ | CSS 繪製 | ✅ 已優化 |
| 中秋 | 雲層漂浮 | 5-7s | ∞ | CSS 繪製 | ✅ 已優化 |
| 中秋 | 月亮微光 | 3s | ∞ | Emoji | ✅ |
| 中秋 | 燈籠漂浮 | 4s | ∞ | CSS 繪製 | ✅ |
| 聖誕 | 雪花飄落 | 5-8s | ∞ | Emoji | ✅ |
| 聖誕 | 燈串微閃 | 2-3s | ∞ | Emoji | ✅ |
| 聖誕 | 球反光 | 3-4s | ∞ | Emoji | ✅ |
| 新年 | 煙火爆炸 | 1.5s | 隨機 | Emoji | ✅ 已優化 |
| 新年 | 金幣灑落 | 3-5s | ∞ | Emoji | ✅ 新增 |
| 新年 | 燈籠搖晃 | 3-3.9s | ∞ | CSS 繪製 | ✅ 新增 |
| ~~新年~~ | ~~門簾開場~~ | ~~2s~~ | ~~一次~~ | ~~CSS~~ | ❌ 已移除 |
| ~~新年~~ | ~~捲軸展開~~ | ~~2s~~ | ~~一次~~ | ~~CSS~~ | ❌ 已移除 |

---

## 🔄 最近更新

### 2025-01-24
- ✅ 優化中秋主題玉兔：使用 CSS 繪製長耳朵玉兔，避免 iOS 誤認為老鼠
- ✅ 優化中秋主題雲層：使用 CSS 繪製白雲，解決 Android/iOS 顯示差異
- ✅ 優化新年主題煙火：修復顯示問題，添加旋轉效果
- ✅ 新增新年主題金幣灑落：象徵恭喜發財
- ✅ 新增新年主題燈籠搖晃：扁圓形紅燈籠，6 種吉祥字（福發財春喜吉）
- ❌ 移除新年主題門簾開場：過於突兀
- ❌ 移除新年主題春聯捲軸：排版困難

---

## 📞 支援

如有任何問題或建議，請聯繫開發團隊。